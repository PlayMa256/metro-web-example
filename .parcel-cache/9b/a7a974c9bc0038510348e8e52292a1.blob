var $f7fe3d1862fd0a65fa1efc5a33670f67$exports = {};
$parcel$require("f7fe3d1862fd0a65fa1efc5a33670f67", "./array");
$parcel$require("f7fe3d1862fd0a65fa1efc5a33670f67", "./constant");
$parcel$require("f7fe3d1862fd0a65fa1efc5a33670f67", "./offset/none");
$parcel$require("f7fe3d1862fd0a65fa1efc5a33670f67", "./order/none");

function $f7fe3d1862fd0a65fa1efc5a33670f67$var$stackValue(d, key) {
  return d[key];
}

var $f7fe3d1862fd0a65fa1efc5a33670f67$export$default = function () {
  var keys = $f7fe3d1862fd0a65fa1efc5a33670f67$import$constant([]),
      order = $f7fe3d1862fd0a65fa1efc5a33670f67$import$orderNone,
      offset = $f7fe3d1862fd0a65fa1efc5a33670f67$import$offsetNone,
      value = $f7fe3d1862fd0a65fa1efc5a33670f67$var$stackValue;

  function stack(data) {
    var kz = keys.apply(this, arguments),
        i,
        m = data.length,
        n = kz.length,
        sz = new Array(n),
        oz;

    for (i = 0; i < n; ++i) {
      for (var ki = kz[i], si = sz[i] = new Array(m), j = 0, sij; j < m; ++j) {
        si[j] = sij = [0, +value(data[j], ki, j, data)];
        sij.data = data[j];
      }

      si.key = ki;
    }

    for (i = 0, oz = order(sz); i < n; ++i) {
      sz[oz[i]].index = i;
    }

    offset(sz, oz);
    return sz;
  }

  stack.keys = function (_) {
    return arguments.length ? (keys = typeof _ === "function" ? _ : $f7fe3d1862fd0a65fa1efc5a33670f67$import$constant($f7fe3d1862fd0a65fa1efc5a33670f67$import$slice.call(_)), stack) : keys;
  };

  stack.value = function (_) {
    return arguments.length ? (value = typeof _ === "function" ? _ : $f7fe3d1862fd0a65fa1efc5a33670f67$import$constant(+_), stack) : value;
  };

  stack.order = function (_) {
    return arguments.length ? (order = _ == null ? $f7fe3d1862fd0a65fa1efc5a33670f67$import$orderNone : typeof _ === "function" ? _ : $f7fe3d1862fd0a65fa1efc5a33670f67$import$constant($f7fe3d1862fd0a65fa1efc5a33670f67$import$slice.call(_)), stack) : order;
  };

  stack.offset = function (_) {
    return arguments.length ? (offset = _ == null ? $f7fe3d1862fd0a65fa1efc5a33670f67$import$offsetNone : _, stack) : offset;
  };

  return stack;
};

$f7fe3d1862fd0a65fa1efc5a33670f67$exports.default = $f7fe3d1862fd0a65fa1efc5a33670f67$export$default;