var $f01de75b5f726ef544a4b18ef3caa5f$exports = {};
$parcel$require("6f01de75b5f726ef544a4b18ef3caa5f", "@babel/runtime/helpers/esm/extends");
$parcel$require("6f01de75b5f726ef544a4b18ef3caa5f", "@babel/runtime/helpers/esm/objectWithoutProperties");
$parcel$require("6f01de75b5f726ef544a4b18ef3caa5f", "react");
$parcel$require("6f01de75b5f726ef544a4b18ef3caa5f", "prop-types");
$parcel$require("6f01de75b5f726ef544a4b18ef3caa5f", "../utils/debounce");
$parcel$require("6f01de75b5f726ef544a4b18ef3caa5f", "../utils/useForkRef");

function $f01de75b5f726ef544a4b18ef3caa5f$var$getStyleValue(computedStyle, property) {
  return parseInt(computedStyle[property], 10) || 0;
}

var $f01de75b5f726ef544a4b18ef3caa5f$var$useEnhancedEffect = typeof window !== 'undefined' ? $f01de75b5f726ef544a4b18ef3caa5f$import$React.useLayoutEffect : $f01de75b5f726ef544a4b18ef3caa5f$import$React.useEffect;
var $f01de75b5f726ef544a4b18ef3caa5f$var$styles = {
  /* Styles applied to the shadow textarea element. */
  shadow: {
    // Visibility needed to hide the extra text area on iPads
    visibility: 'hidden',
    // Remove from the content flow
    position: 'absolute',
    // Ignore the scrollbar width
    overflow: 'hidden',
    height: 0,
    top: 0,
    left: 0,
    // Create a new layer, increase the isolation of the computed values
    transform: 'translateZ(0)'
  }
};
var $f01de75b5f726ef544a4b18ef3caa5f$export$default = $f01de75b5f726ef544a4b18ef3caa5f$import$React.forwardRef(function TextareaAutosize(props, ref) {
  var onChange = props.onChange,
      rows = props.rows,
      rowsMax = props.rowsMax,
      style = props.style,
      value = props.value,
      other = $f01de75b5f726ef544a4b18ef3caa5f$import$_objectWithoutProperties(props, ["onChange", "rows", "rowsMax", "style", "value"]);

  var _React$useRef = $f01de75b5f726ef544a4b18ef3caa5f$import$React.useRef(value != null),
      isControlled = _React$useRef.current;

  var inputRef = $f01de75b5f726ef544a4b18ef3caa5f$import$React.useRef(null);
  var handleRef = $f01de75b5f726ef544a4b18ef3caa5f$import$useForkRef(ref, inputRef);
  var shadowRef = $f01de75b5f726ef544a4b18ef3caa5f$import$React.useRef(null);

  var _React$useState = $f01de75b5f726ef544a4b18ef3caa5f$import$React.useState({}),
      state = _React$useState[0],
      setState = _React$useState[1];

  var syncHeight = $f01de75b5f726ef544a4b18ef3caa5f$import$React.useCallback(function () {
    var input = inputRef.current;
    var computedStyle = window.getComputedStyle(input);
    var inputShallow = shadowRef.current;
    inputShallow.style.width = computedStyle.width;
    inputShallow.value = input.value || props.placeholder || 'x';
    var boxSizing = computedStyle['box-sizing'];
    var padding = $f01de75b5f726ef544a4b18ef3caa5f$var$getStyleValue(computedStyle, 'padding-bottom') + $f01de75b5f726ef544a4b18ef3caa5f$var$getStyleValue(computedStyle, 'padding-top');
    var border = $f01de75b5f726ef544a4b18ef3caa5f$var$getStyleValue(computedStyle, 'border-bottom-width') + $f01de75b5f726ef544a4b18ef3caa5f$var$getStyleValue(computedStyle, 'border-top-width'); // The height of the inner content

    var innerHeight = inputShallow.scrollHeight - padding; // Measure height of a textarea with a single row

    inputShallow.value = 'x';
    var singleRowHeight = inputShallow.scrollHeight - padding; // The height of the outer content

    var outerHeight = innerHeight;

    if (rows != null) {
      outerHeight = Math.max(Number(rows) * singleRowHeight, outerHeight);
    }

    if (rowsMax != null) {
      outerHeight = Math.min(Number(rowsMax) * singleRowHeight, outerHeight);
    }

    outerHeight = Math.max(outerHeight, singleRowHeight); // Take the box sizing into account for applying this value as a style.

    var outerHeightStyle = outerHeight + (boxSizing === 'border-box' ? padding + border : 0);
    var overflow = Math.abs(outerHeight - innerHeight) <= 1;
    setState(function (prevState) {
      // Need a large enough different to update the height.
      // This prevents infinite rendering loop.
      if (outerHeightStyle > 0 && Math.abs((prevState.outerHeightStyle || 0) - outerHeightStyle) > 1 || prevState.overflow !== overflow) {
        return {
          overflow: overflow,
          outerHeightStyle: outerHeightStyle
        };
      }

      return prevState;
    });
  }, [rows, rowsMax, props.placeholder]);
  $f01de75b5f726ef544a4b18ef3caa5f$import$React.useEffect(function () {
    var handleResize = $f01de75b5f726ef544a4b18ef3caa5f$import$debounce(function () {
      syncHeight();
    });
    window.addEventListener('resize', handleResize);
    return function () {
      handleResize.clear();
      window.removeEventListener('resize', handleResize);
    };
  }, [syncHeight]);
  $f01de75b5f726ef544a4b18ef3caa5f$var$useEnhancedEffect(function () {
    syncHeight();
  });

  var handleChange = function handleChange(event) {
    if (!isControlled) {
      syncHeight();
    }

    if (onChange) {
      onChange(event);
    }
  };

  return $f01de75b5f726ef544a4b18ef3caa5f$import$React.createElement($f01de75b5f726ef544a4b18ef3caa5f$import$React.Fragment, null, $f01de75b5f726ef544a4b18ef3caa5f$import$React.createElement("textarea", $f01de75b5f726ef544a4b18ef3caa5f$import$_extends({
    value: value,
    onChange: handleChange,
    ref: handleRef // Apply the rows prop to get a "correct" first SSR paint
    ,
    rows: rows || 1,
    style: $f01de75b5f726ef544a4b18ef3caa5f$import$_extends({
      height: state.outerHeightStyle,
      // Need a large enough different to allow scrolling.
      // This prevents infinite rendering loop.
      overflow: state.overflow ? 'hidden' : null
    }, style)
  }, other)), $f01de75b5f726ef544a4b18ef3caa5f$import$React.createElement("textarea", {
    "aria-hidden": true,
    className: props.className,
    readOnly: true,
    ref: shadowRef,
    tabIndex: -1,
    style: $f01de75b5f726ef544a4b18ef3caa5f$import$_extends({}, $f01de75b5f726ef544a4b18ef3caa5f$var$styles.shadow, {}, style)
  }));
});
"production" !== "production" ? $f01de75b5f726ef544a4b18ef3caa5f$export$default.propTypes = {
  /**
   * @ignore
   */
  className: $f01de75b5f726ef544a4b18ef3caa5f$import$PropTypes.string,

  /**
   * @ignore
   */
  onChange: $f01de75b5f726ef544a4b18ef3caa5f$import$PropTypes.func,

  /**
   * @ignore
   */
  placeholder: $f01de75b5f726ef544a4b18ef3caa5f$import$PropTypes.string,

  /**
   * Minimum number of rows to display.
   */
  rows: $f01de75b5f726ef544a4b18ef3caa5f$import$PropTypes.oneOfType([$f01de75b5f726ef544a4b18ef3caa5f$import$PropTypes.string, $f01de75b5f726ef544a4b18ef3caa5f$import$PropTypes.number]),

  /**
   * Maximum number of rows to display.
   */
  rowsMax: $f01de75b5f726ef544a4b18ef3caa5f$import$PropTypes.oneOfType([$f01de75b5f726ef544a4b18ef3caa5f$import$PropTypes.string, $f01de75b5f726ef544a4b18ef3caa5f$import$PropTypes.number]),

  /**
   * @ignore
   */
  style: $f01de75b5f726ef544a4b18ef3caa5f$import$PropTypes.object,

  /**
   * @ignore
   */
  value: $f01de75b5f726ef544a4b18ef3caa5f$import$PropTypes.any
} : void 0;
$f01de75b5f726ef544a4b18ef3caa5f$exports.default = $f01de75b5f726ef544a4b18ef3caa5f$export$default;