var $ec88e75f6e9bf177ba19aa23100$exports = {};
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "lodash/isFunction");
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "lodash/sumBy");
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "lodash/min");
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "lodash/maxBy");
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "react");
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "prop-types");
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "classnames");
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "../container/Surface");
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "../container/Layer");
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "../component/Tooltip");
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "../shape/Rectangle");
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "../util/PureRender");
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "../util/ReactUtils");
$parcel$require("25126ec88e75f6e9bf177ba19aa23100", "../util/ChartUtils");
var $ec88e75f6e9bf177ba19aa23100$var$_class, $ec88e75f6e9bf177ba19aa23100$var$_class2, $ec88e75f6e9bf177ba19aa23100$var$_temp;

function $ec88e75f6e9bf177ba19aa23100$var$_typeof(obj) {
  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    $ec88e75f6e9bf177ba19aa23100$var$_typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    $ec88e75f6e9bf177ba19aa23100$var$_typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return $ec88e75f6e9bf177ba19aa23100$var$_typeof(obj);
}

function $ec88e75f6e9bf177ba19aa23100$var$_objectWithoutProperties(source, excluded) {
  if (source == null) return {};
  var target = $ec88e75f6e9bf177ba19aa23100$var$_objectWithoutPropertiesLoose(source, excluded);
  var key, i;

  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);

    for (i = 0; i < sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      if (excluded.indexOf(key) >= 0) continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
      target[key] = source[key];
    }
  }

  return target;
}

function $ec88e75f6e9bf177ba19aa23100$var$_objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

function $ec88e75f6e9bf177ba19aa23100$var$_extends() {
  $ec88e75f6e9bf177ba19aa23100$var$_extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return $ec88e75f6e9bf177ba19aa23100$var$_extends.apply(this, arguments);
}

function $ec88e75f6e9bf177ba19aa23100$var$_classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function $ec88e75f6e9bf177ba19aa23100$var$_defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function $ec88e75f6e9bf177ba19aa23100$var$_createClass(Constructor, protoProps, staticProps) {
  if (protoProps) $ec88e75f6e9bf177ba19aa23100$var$_defineProperties(Constructor.prototype, protoProps);
  if (staticProps) $ec88e75f6e9bf177ba19aa23100$var$_defineProperties(Constructor, staticProps);
  return Constructor;
}

function $ec88e75f6e9bf177ba19aa23100$var$_possibleConstructorReturn(self, call) {
  if (call && ($ec88e75f6e9bf177ba19aa23100$var$_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return $ec88e75f6e9bf177ba19aa23100$var$_assertThisInitialized(self);
}

function $ec88e75f6e9bf177ba19aa23100$var$_assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function $ec88e75f6e9bf177ba19aa23100$var$_getPrototypeOf(o) {
  $ec88e75f6e9bf177ba19aa23100$var$_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return $ec88e75f6e9bf177ba19aa23100$var$_getPrototypeOf(o);
}

function $ec88e75f6e9bf177ba19aa23100$var$_inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) $ec88e75f6e9bf177ba19aa23100$var$_setPrototypeOf(subClass, superClass);
}

function $ec88e75f6e9bf177ba19aa23100$var$_setPrototypeOf(o, p) {
  $ec88e75f6e9bf177ba19aa23100$var$_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return $ec88e75f6e9bf177ba19aa23100$var$_setPrototypeOf(o, p);
}

function $ec88e75f6e9bf177ba19aa23100$var$ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function $ec88e75f6e9bf177ba19aa23100$var$_objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      $ec88e75f6e9bf177ba19aa23100$var$ownKeys(source, true).forEach(function (key) {
        $ec88e75f6e9bf177ba19aa23100$var$_defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      $ec88e75f6e9bf177ba19aa23100$var$ownKeys(source).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function $ec88e75f6e9bf177ba19aa23100$var$_defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}
/**
 * @file TreemapChart
 */


var $ec88e75f6e9bf177ba19aa23100$var$defaultCoordinateOfTooltip = {
  x: 0,
  y: 0
};

var $ec88e75f6e9bf177ba19aa23100$var$interpolationGenerator = function interpolationGenerator(a, b) {
  var ka = +a;
  var kb = b - ka;
  return function (t) {
    return ka + kb * t;
  };
};

var $ec88e75f6e9bf177ba19aa23100$var$centerY = function centerY(node) {
  return node.y + node.dy / 2;
};

var $ec88e75f6e9bf177ba19aa23100$var$getValue = function getValue(entry) {
  return entry && entry.value || 0;
};

var $ec88e75f6e9bf177ba19aa23100$var$getSumOfIds = function getSumOfIds(links, ids) {
  return ids.reduce(function (result, id) {
    return result + $ec88e75f6e9bf177ba19aa23100$var$getValue(links[id]);
  }, 0);
};

var $ec88e75f6e9bf177ba19aa23100$var$getSumWithWeightedSource = function getSumWithWeightedSource(tree, links, ids) {
  return ids.reduce(function (result, id) {
    var link = links[id];
    var sourceNode = tree[link.source];
    return result + $ec88e75f6e9bf177ba19aa23100$var$centerY(sourceNode) * $ec88e75f6e9bf177ba19aa23100$var$getValue(links[id]);
  }, 0);
};

var $ec88e75f6e9bf177ba19aa23100$var$getSumWithWeightedTarget = function getSumWithWeightedTarget(tree, links, ids) {
  return ids.reduce(function (result, id) {
    var link = links[id];
    var targetNode = tree[link.target];
    return result + $ec88e75f6e9bf177ba19aa23100$var$centerY(targetNode) * $ec88e75f6e9bf177ba19aa23100$var$getValue(links[id]);
  }, 0);
};

var $ec88e75f6e9bf177ba19aa23100$var$ascendingY = function ascendingY(a, b) {
  return a.y - b.y;
};

var $ec88e75f6e9bf177ba19aa23100$var$searchTargetsAndSources = function searchTargetsAndSources(links, id) {
  var sourceNodes = [];
  var sourceLinks = [];
  var targetNodes = [];
  var targetLinks = [];

  for (var i = 0, len = links.length; i < len; i++) {
    var link = links[i];

    if (link.source === id) {
      targetNodes.push(link.target);
      targetLinks.push(i);
    }

    if (link.target === id) {
      sourceNodes.push(link.source);
      sourceLinks.push(i);
    }
  }

  return {
    sourceNodes: sourceNodes,
    sourceLinks: sourceLinks,
    targetLinks: targetLinks,
    targetNodes: targetNodes
  };
};

var $ec88e75f6e9bf177ba19aa23100$var$updateDepthOfTargets = function updateDepthOfTargets(tree, curNode) {
  var targetNodes = curNode.targetNodes;

  for (var i = 0, len = targetNodes.length; i < len; i++) {
    var target = tree[targetNodes[i]];

    if (target) {
      target.depth = Math.max(curNode.depth + 1, target.depth);
      updateDepthOfTargets(tree, target);
    }
  }
};

var $ec88e75f6e9bf177ba19aa23100$var$getNodesTree = function getNodesTree(_ref, width, nodeWidth) {
  var nodes = _ref.nodes,
      links = _ref.links;
  var tree = nodes.map(function (entry, index) {
    var result = $ec88e75f6e9bf177ba19aa23100$var$searchTargetsAndSources(links, index);
    return $ec88e75f6e9bf177ba19aa23100$var$_objectSpread({}, entry, {}, result, {
      value: Math.max($ec88e75f6e9bf177ba19aa23100$var$getSumOfIds(links, result.sourceLinks), $ec88e75f6e9bf177ba19aa23100$var$getSumOfIds(links, result.targetLinks)),
      depth: 0
    });
  });

  for (var i = 0, len = tree.length; i < len; i++) {
    var node = tree[i];

    if (!node.sourceNodes.length) {
      $ec88e75f6e9bf177ba19aa23100$var$updateDepthOfTargets(tree, node);
    }
  }

  var maxDepth = $ec88e75f6e9bf177ba19aa23100$import$_maxBy(tree, function (entry) {
    return entry.depth;
  }).depth;

  if (maxDepth >= 1) {
    var childWidth = (width - nodeWidth) / maxDepth;

    for (var _i = 0, _len = tree.length; _i < _len; _i++) {
      var _node = tree[_i];

      if (!_node.targetNodes.length) {
        _node.depth = maxDepth;
      }

      _node.x = _node.depth * childWidth;
      _node.dx = nodeWidth;
    }
  }

  return {
    tree: tree,
    maxDepth: maxDepth
  };
};

var $ec88e75f6e9bf177ba19aa23100$var$getDepthTree = function getDepthTree(tree) {
  var result = [];

  for (var i = 0, len = tree.length; i < len; i++) {
    var node = tree[i];

    if (!result[node.depth]) {
      result[node.depth] = [];
    }

    result[node.depth].push(node);
  }

  return result;
};

var $ec88e75f6e9bf177ba19aa23100$var$updateYOfTree = function updateYOfTree(depthTree, height, nodePadding, links) {
  var yRatio = $ec88e75f6e9bf177ba19aa23100$import$_min(depthTree.map(function (nodes) {
    return (height - (nodes.length - 1) * nodePadding) / $ec88e75f6e9bf177ba19aa23100$import$_sumBy(nodes, $ec88e75f6e9bf177ba19aa23100$var$getValue);
  }));

  for (var d = 0, maxDepth = depthTree.length; d < maxDepth; d++) {
    for (var i = 0, len = depthTree[d].length; i < len; i++) {
      var node = depthTree[d][i];
      node.y = i;
      node.dy = node.value * yRatio;
    }
  }

  return links.map(function (link) {
    return $ec88e75f6e9bf177ba19aa23100$var$_objectSpread({}, link, {
      dy: $ec88e75f6e9bf177ba19aa23100$var$getValue(link) * yRatio
    });
  });
};

var $ec88e75f6e9bf177ba19aa23100$var$resolveCollisions = function resolveCollisions(depthTree, height, nodePadding) {
  for (var i = 0, len = depthTree.length; i < len; i++) {
    var nodes = depthTree[i];
    var n = nodes.length; // Sort by the value of y

    nodes.sort($ec88e75f6e9bf177ba19aa23100$var$ascendingY);
    var y0 = 0;

    for (var j = 0; j < n; j++) {
      var node = nodes[j];
      var dy = y0 - node.y;

      if (dy > 0) {
        node.y += dy;
      }

      y0 = node.y + node.dy + nodePadding;
    }

    y0 = height + nodePadding;

    for (var _j = n - 1; _j >= 0; _j--) {
      var _node2 = nodes[_j];

      var _dy = _node2.y + _node2.dy + nodePadding - y0;

      if (_dy > 0) {
        _node2.y -= _dy;
        y0 = _node2.y;
      } else {
        break;
      }
    }
  }
};

var $ec88e75f6e9bf177ba19aa23100$var$relaxLeftToRight = function relaxLeftToRight(tree, depthTree, links, alpha) {
  for (var i = 0, maxDepth = depthTree.length; i < maxDepth; i++) {
    var nodes = depthTree[i];

    for (var j = 0, len = nodes.length; j < len; j++) {
      var node = nodes[j];

      if (node.sourceLinks.length) {
        var sourceSum = $ec88e75f6e9bf177ba19aa23100$var$getSumOfIds(links, node.sourceLinks);
        var weightedSum = $ec88e75f6e9bf177ba19aa23100$var$getSumWithWeightedSource(tree, links, node.sourceLinks);
        var y = weightedSum / sourceSum;
        node.y += (y - $ec88e75f6e9bf177ba19aa23100$var$centerY(node)) * alpha;
      }
    }
  }
};

var $ec88e75f6e9bf177ba19aa23100$var$relaxRightToLeft = function relaxRightToLeft(tree, depthTree, links, alpha) {
  for (var i = depthTree.length - 1; i >= 0; i--) {
    var nodes = depthTree[i];

    for (var j = 0, len = nodes.length; j < len; j++) {
      var node = nodes[j];

      if (node.targetLinks.length) {
        var targetSum = $ec88e75f6e9bf177ba19aa23100$var$getSumOfIds(links, node.targetLinks);
        var weightedSum = $ec88e75f6e9bf177ba19aa23100$var$getSumWithWeightedTarget(tree, links, node.targetLinks);
        var y = weightedSum / targetSum;
        node.y += (y - $ec88e75f6e9bf177ba19aa23100$var$centerY(node)) * alpha;
      }
    }
  }
};

var $ec88e75f6e9bf177ba19aa23100$var$updateYOfLinks = function updateYOfLinks(tree, links) {
  for (var i = 0, len = tree.length; i < len; i++) {
    var node = tree[i];
    var sy = 0;
    var ty = 0;
    node.targetLinks.sort(function (a, b) {
      return tree[links[a].target].y - tree[links[b].target].y;
    });
    node.sourceLinks.sort(function (a, b) {
      return tree[links[a].source].y - tree[links[b].source].y;
    });

    for (var j = 0, tLen = node.targetLinks.length; j < tLen; j++) {
      var link = links[node.targetLinks[j]];

      if (link) {
        link.sy = sy;
        sy += link.dy;
      }
    }

    for (var _j2 = 0, sLen = node.sourceLinks.length; _j2 < sLen; _j2++) {
      var _link = links[node.sourceLinks[_j2]];

      if (_link) {
        _link.ty = ty;
        ty += _link.dy;
      }
    }
  }
};

var $ec88e75f6e9bf177ba19aa23100$var$computeData = function computeData(_ref2) {
  var data = _ref2.data,
      width = _ref2.width,
      height = _ref2.height,
      iterations = _ref2.iterations,
      nodeWidth = _ref2.nodeWidth,
      nodePadding = _ref2.nodePadding;
  var links = data.links;

  var _getNodesTree = $ec88e75f6e9bf177ba19aa23100$var$getNodesTree(data, width, nodeWidth),
      tree = _getNodesTree.tree;

  var depthTree = $ec88e75f6e9bf177ba19aa23100$var$getDepthTree(tree);
  var newLinks = $ec88e75f6e9bf177ba19aa23100$var$updateYOfTree(depthTree, height, nodePadding, links);
  $ec88e75f6e9bf177ba19aa23100$var$resolveCollisions(depthTree, height, nodePadding);
  var alpha = 1;

  for (var i = 1; i <= iterations; i++) {
    $ec88e75f6e9bf177ba19aa23100$var$relaxRightToLeft(tree, depthTree, newLinks, alpha *= 0.99);
    $ec88e75f6e9bf177ba19aa23100$var$resolveCollisions(depthTree, height, nodePadding);
    $ec88e75f6e9bf177ba19aa23100$var$relaxLeftToRight(tree, depthTree, newLinks, alpha);
    $ec88e75f6e9bf177ba19aa23100$var$resolveCollisions(depthTree, height, nodePadding);
  }

  $ec88e75f6e9bf177ba19aa23100$var$updateYOfLinks(tree, newLinks);
  return {
    nodes: tree,
    links: newLinks
  };
};

var $ec88e75f6e9bf177ba19aa23100$var$getCoordinateOfTooltip = function getCoordinateOfTooltip(el, type) {
  if (type === 'node') {
    return {
      x: el.x + el.width / 2,
      y: el.y + el.height / 2
    };
  }

  return {
    x: (el.sourceX + el.targetX) / 2,
    y: (el.sourceY + el.targetY) / 2
  };
};

var $ec88e75f6e9bf177ba19aa23100$var$getPayloadOfTooltip = function getPayloadOfTooltip(el, type, nameKey) {
  var payload = el.payload;

  if (type === 'node') {
    return [{
      payload: el,
      name: $ec88e75f6e9bf177ba19aa23100$import$getValueByDataKey(payload, nameKey, ''),
      value: $ec88e75f6e9bf177ba19aa23100$import$getValueByDataKey(payload, 'value')
    }];
  }

  if (payload.source && payload.target) {
    var sourceName = $ec88e75f6e9bf177ba19aa23100$import$getValueByDataKey(payload.source, nameKey, '');
    var targetName = $ec88e75f6e9bf177ba19aa23100$import$getValueByDataKey(payload.target, nameKey, '');
    return [{
      payload: el,
      name: "".concat(sourceName, " - ").concat(targetName),
      value: $ec88e75f6e9bf177ba19aa23100$import$getValueByDataKey(payload, 'value')
    }];
  }

  return [];
};

var $ec88e75f6e9bf177ba19aa23100$export$default = $ec88e75f6e9bf177ba19aa23100$import$pureRender($ec88e75f6e9bf177ba19aa23100$var$_class = ($ec88e75f6e9bf177ba19aa23100$var$_temp = $ec88e75f6e9bf177ba19aa23100$var$_class2 =
/*#__PURE__*/
function (_Component) {
  $ec88e75f6e9bf177ba19aa23100$var$_inherits(Sankey, _Component);

  function Sankey(props) {
    var _this;

    $ec88e75f6e9bf177ba19aa23100$var$_classCallCheck(this, Sankey);
    _this = $ec88e75f6e9bf177ba19aa23100$var$_possibleConstructorReturn(this, $ec88e75f6e9bf177ba19aa23100$var$_getPrototypeOf(Sankey).call(this, props));
    _this.state = _this.constructor.createDefaultState(props);
    return _this;
  }

  $ec88e75f6e9bf177ba19aa23100$var$_createClass(Sankey, [{
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      var _this$props = this.props,
          data = _this$props.data,
          width = _this$props.width,
          height = _this$props.height,
          margin = _this$props.margin,
          iterations = _this$props.iterations,
          nodeWidth = _this$props.nodeWidth,
          nodePadding = _this$props.nodePadding,
          nameKey = _this$props.nameKey;

      if (nextProps.data !== data || nextProps.width !== width || nextProps.height !== height || !$ec88e75f6e9bf177ba19aa23100$import$shallowEqual(nextProps.margin, margin) || nextProps.iterations !== iterations || nextProps.nodeWidth !== nodeWidth || nextProps.nodePadding !== nodePadding || nextProps.nameKey !== nameKey) {
        this.setState(this.constructor.createDefaultState(nextProps));
      }
    }
    /**
     * Returns default, reset state for the sankey chart.
     * @param  {Object} props The latest props
     * @return {Object} Whole new state
     */

  }, {
    key: "handleMouseEnter",
    value: function handleMouseEnter(el, type, e) {
      var _this$props2 = this.props,
          onMouseEnter = _this$props2.onMouseEnter,
          children = _this$props2.children;
      var tooltipItem = $ec88e75f6e9bf177ba19aa23100$import$findChildByType(children, $ec88e75f6e9bf177ba19aa23100$import$Tooltip);

      if (tooltipItem) {
        this.setState({
          activeElement: el,
          activeElementType: type,
          isTooltipActive: true
        }, function () {
          if (onMouseEnter) {
            onMouseEnter(el, type, e);
          }
        });
      } else if (onMouseEnter) {
        onMouseEnter(el, type, e);
      }
    }
  }, {
    key: "handleMouseLeave",
    value: function handleMouseLeave(el, type, e) {
      var _this$props3 = this.props,
          onMouseLeave = _this$props3.onMouseLeave,
          children = _this$props3.children;
      var tooltipItem = $ec88e75f6e9bf177ba19aa23100$import$findChildByType(children, $ec88e75f6e9bf177ba19aa23100$import$Tooltip);

      if (tooltipItem) {
        this.setState({
          isTooltipActive: false
        }, function () {
          if (onMouseLeave) {
            onMouseLeave(el, type, e);
          }
        });
      } else if (onMouseLeave) {
        onMouseLeave(el, type, e);
      }
    }
  }, {
    key: "renderLinks",
    value: function renderLinks(links, nodes) {
      var _this2 = this;

      var _this$props4 = this.props,
          linkCurvature = _this$props4.linkCurvature,
          linkContent = _this$props4.link,
          margin = _this$props4.margin;
      var top = margin.top || 0;
      var left = margin.left || 0;
      return $ec88e75f6e9bf177ba19aa23100$import$React.createElement($ec88e75f6e9bf177ba19aa23100$import$Layer, {
        className: "recharts-sankey-links",
        key: "recharts-sankey-links"
      }, links.map(function (link, i) {
        var sourceRelativeY = link.sy,
            targetRelativeY = link.ty,
            linkWidth = link.dy;
        var source = nodes[link.source];
        var target = nodes[link.target];
        var sourceX = source.x + source.dx + left;
        var targetX = target.x + left;
        var interpolationFunc = $ec88e75f6e9bf177ba19aa23100$var$interpolationGenerator(sourceX, targetX);
        var sourceControlX = interpolationFunc(linkCurvature);
        var targetControlX = interpolationFunc(1 - linkCurvature);
        var sourceY = source.y + sourceRelativeY + linkWidth / 2 + top;
        var targetY = target.y + targetRelativeY + linkWidth / 2 + top;
        var linkProps = $ec88e75f6e9bf177ba19aa23100$var$_objectSpread({
          sourceX: sourceX,
          targetX: targetX,
          sourceY: sourceY,
          targetY: targetY,
          sourceControlX: sourceControlX,
          targetControlX: targetControlX,
          sourceRelativeY: sourceRelativeY,
          targetRelativeY: targetRelativeY,
          linkWidth: linkWidth,
          index: i,
          payload: $ec88e75f6e9bf177ba19aa23100$var$_objectSpread({}, link, {
            source: source,
            target: target
          })
        }, $ec88e75f6e9bf177ba19aa23100$import$getPresentationAttributes(linkContent));
        var events = {
          onMouseEnter: _this2.handleMouseEnter.bind(_this2, linkProps, 'link'),
          onMouseLeave: _this2.handleMouseLeave.bind(_this2, linkProps, 'link')
        };
        return $ec88e75f6e9bf177ba19aa23100$import$React.createElement($ec88e75f6e9bf177ba19aa23100$import$Layer, $ec88e75f6e9bf177ba19aa23100$var$_extends({
          key: "link".concat(i)
        }, events), _this2.constructor.renderLinkItem(linkContent, linkProps));
      }));
    }
  }, {
    key: "renderNodes",
    value: function renderNodes(nodes) {
      var _this3 = this;

      var _this$props5 = this.props,
          nodeContent = _this$props5.node,
          margin = _this$props5.margin;
      var top = margin.top || 0;
      var left = margin.left || 0;
      return $ec88e75f6e9bf177ba19aa23100$import$React.createElement($ec88e75f6e9bf177ba19aa23100$import$Layer, {
        className: "recharts-sankey-nodes",
        key: "recharts-sankey-nodes"
      }, nodes.map(function (node, i) {
        var x = node.x,
            y = node.y,
            dx = node.dx,
            dy = node.dy;
        var nodeProps = $ec88e75f6e9bf177ba19aa23100$var$_objectSpread({}, $ec88e75f6e9bf177ba19aa23100$import$getPresentationAttributes(nodeContent), {
          x: x + left,
          y: y + top,
          width: dx,
          height: dy,
          index: i,
          payload: node
        });
        var events = {
          onMouseEnter: _this3.handleMouseEnter.bind(_this3, nodeProps, 'node'),
          onMouseLeave: _this3.handleMouseLeave.bind(_this3, nodeProps, 'node')
        };
        return $ec88e75f6e9bf177ba19aa23100$import$React.createElement($ec88e75f6e9bf177ba19aa23100$import$Layer, $ec88e75f6e9bf177ba19aa23100$var$_extends({
          key: "node".concat(i)
        }, events), _this3.constructor.renderNodeItem(nodeContent, nodeProps));
      }));
    }
  }, {
    key: "renderTooltip",
    value: function renderTooltip() {
      var _this$props6 = this.props,
          children = _this$props6.children,
          width = _this$props6.width,
          height = _this$props6.height,
          nameKey = _this$props6.nameKey;
      var tooltipItem = $ec88e75f6e9bf177ba19aa23100$import$findChildByType(children, $ec88e75f6e9bf177ba19aa23100$import$Tooltip);

      if (!tooltipItem) {
        return null;
      }

      var _this$state = this.state,
          isTooltipActive = _this$state.isTooltipActive,
          activeElement = _this$state.activeElement,
          activeElementType = _this$state.activeElementType;
      var viewBox = {
        x: 0,
        y: 0,
        width: width,
        height: height
      };
      var coordinate = activeElement ? $ec88e75f6e9bf177ba19aa23100$var$getCoordinateOfTooltip(activeElement, activeElementType) : $ec88e75f6e9bf177ba19aa23100$var$defaultCoordinateOfTooltip;
      var payload = activeElement ? $ec88e75f6e9bf177ba19aa23100$var$getPayloadOfTooltip(activeElement, activeElementType, nameKey) : [];
      return $ec88e75f6e9bf177ba19aa23100$import$React.cloneElement(tooltipItem, {
        viewBox: viewBox,
        active: isTooltipActive,
        coordinate: coordinate,
        label: '',
        payload: payload
      });
    }
  }, {
    key: "render",
    value: function render() {
      if (!$ec88e75f6e9bf177ba19aa23100$import$validateWidthHeight(this)) {
        return null;
      }

      var _this$props7 = this.props,
          width = _this$props7.width,
          height = _this$props7.height,
          className = _this$props7.className,
          style = _this$props7.style,
          children = _this$props7.children,
          others = $ec88e75f6e9bf177ba19aa23100$var$_objectWithoutProperties(_this$props7, ["width", "height", "className", "style", "children"]);
      var _this$state2 = this.state,
          links = _this$state2.links,
          nodes = _this$state2.nodes;
      var attrs = $ec88e75f6e9bf177ba19aa23100$import$getPresentationAttributes(others);
      return $ec88e75f6e9bf177ba19aa23100$import$React.createElement("div", {
        className: $ec88e75f6e9bf177ba19aa23100$import$classNames('recharts-wrapper', className),
        style: $ec88e75f6e9bf177ba19aa23100$var$_objectSpread({}, style, {
          position: 'relative',
          cursor: 'default',
          width: width,
          height: height
        })
      }, $ec88e75f6e9bf177ba19aa23100$import$React.createElement($ec88e75f6e9bf177ba19aa23100$import$Surface, $ec88e75f6e9bf177ba19aa23100$var$_extends({}, attrs, {
        width: width,
        height: height
      }), $ec88e75f6e9bf177ba19aa23100$import$filterSvgElements(children), this.renderLinks(links, nodes), this.renderNodes(nodes)), this.renderTooltip());
    }
  }], [{
    key: "createDefaultState",
    value: function createDefaultState(props) {
      var data = props.data,
          width = props.width,
          height = props.height,
          margin = props.margin,
          iterations = props.iterations,
          nodeWidth = props.nodeWidth,
          nodePadding = props.nodePadding;
      var contentWidth = width - (margin && margin.left || 0) - (margin && margin.right || 0);
      var contentHeight = height - (margin && margin.top || 0) - (margin && margin.bottom || 0);

      var _computeData = $ec88e75f6e9bf177ba19aa23100$var$computeData({
        data: data,
        width: contentWidth,
        height: contentHeight,
        iterations: iterations,
        nodeWidth: nodeWidth,
        nodePadding: nodePadding
      }),
          links = _computeData.links,
          nodes = _computeData.nodes;

      return {
        activeElement: null,
        activeElementType: null,
        isTooltipActive: false,
        nodes: nodes,
        links: links
      };
    }
  }, {
    key: "renderLinkItem",
    value: function renderLinkItem(option, props) {
      if ($ec88e75f6e9bf177ba19aa23100$import$React.isValidElement(option)) {
        return $ec88e75f6e9bf177ba19aa23100$import$React.cloneElement(option, props);
      }

      if ($ec88e75f6e9bf177ba19aa23100$import$_isFunction(option)) {
        return option(props);
      }

      var sourceX = props.sourceX,
          sourceY = props.sourceY,
          sourceControlX = props.sourceControlX,
          targetX = props.targetX,
          targetY = props.targetY,
          targetControlX = props.targetControlX,
          linkWidth = props.linkWidth,
          others = $ec88e75f6e9bf177ba19aa23100$var$_objectWithoutProperties(props, ["sourceX", "sourceY", "sourceControlX", "targetX", "targetY", "targetControlX", "linkWidth"]);
      return $ec88e75f6e9bf177ba19aa23100$import$React.createElement("path", $ec88e75f6e9bf177ba19aa23100$var$_extends({
        className: "recharts-sankey-link",
        d: "\n          M".concat(sourceX, ",").concat(sourceY, "\n          C").concat(sourceControlX, ",").concat(sourceY, " ").concat(targetControlX, ",").concat(targetY, " ").concat(targetX, ",").concat(targetY, "\n        "),
        fill: "none",
        stroke: "#333",
        strokeWidth: linkWidth,
        strokeOpacity: "0.2"
      }, $ec88e75f6e9bf177ba19aa23100$import$getPresentationAttributes(others)));
    }
  }, {
    key: "renderNodeItem",
    value: function renderNodeItem(option, props) {
      if ($ec88e75f6e9bf177ba19aa23100$import$React.isValidElement(option)) {
        return $ec88e75f6e9bf177ba19aa23100$import$React.cloneElement(option, props);
      }

      if ($ec88e75f6e9bf177ba19aa23100$import$_isFunction(option)) {
        return option(props);
      }

      return $ec88e75f6e9bf177ba19aa23100$import$React.createElement($ec88e75f6e9bf177ba19aa23100$import$Rectangle, $ec88e75f6e9bf177ba19aa23100$var$_extends({
        className: "recharts-sankey-node",
        fill: "#0088fe",
        fillOpacity: "0.8"
      }, props));
    }
  }]);
  return Sankey;
}($ec88e75f6e9bf177ba19aa23100$import$Component), $ec88e75f6e9bf177ba19aa23100$var$_class2.displayName = 'Sankey', $ec88e75f6e9bf177ba19aa23100$var$_class2.propTypes = $ec88e75f6e9bf177ba19aa23100$var$_objectSpread({}, $ec88e75f6e9bf177ba19aa23100$import$PRESENTATION_ATTRIBUTES, {}, $ec88e75f6e9bf177ba19aa23100$import$EVENT_ATTRIBUTES, {
  nameKey: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.oneOfType([$ec88e75f6e9bf177ba19aa23100$import$PropTypes.string, $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number, $ec88e75f6e9bf177ba19aa23100$import$PropTypes.func]),
  dataKey: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.oneOfType([$ec88e75f6e9bf177ba19aa23100$import$PropTypes.string, $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number, $ec88e75f6e9bf177ba19aa23100$import$PropTypes.func]),
  width: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number,
  height: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number,
  data: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.shape({
    nodes: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.array,
    links: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.arrayOf($ec88e75f6e9bf177ba19aa23100$import$PropTypes.shape({
      target: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number,
      source: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number,
      value: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number
    }))
  }),
  nodePadding: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number,
  nodeWidth: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number,
  linkCurvature: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number,
  iterations: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number,
  node: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.oneOfType([$ec88e75f6e9bf177ba19aa23100$import$PropTypes.object, $ec88e75f6e9bf177ba19aa23100$import$PropTypes.element, $ec88e75f6e9bf177ba19aa23100$import$PropTypes.func]),
  link: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.oneOfType([$ec88e75f6e9bf177ba19aa23100$import$PropTypes.object, $ec88e75f6e9bf177ba19aa23100$import$PropTypes.element, $ec88e75f6e9bf177ba19aa23100$import$PropTypes.func]),
  style: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.object,
  className: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.string,
  children: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.oneOfType([$ec88e75f6e9bf177ba19aa23100$import$PropTypes.arrayOf($ec88e75f6e9bf177ba19aa23100$import$PropTypes.node), $ec88e75f6e9bf177ba19aa23100$import$PropTypes.node]),
  margin: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.shape({
    top: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number,
    right: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number,
    bottom: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number,
    left: $ec88e75f6e9bf177ba19aa23100$import$PropTypes.number
  })
}), $ec88e75f6e9bf177ba19aa23100$var$_class2.defaultProps = {
  nodePadding: 10,
  nodeWidth: 10,
  nameKey: 'name',
  dataKey: 'value',
  linkCurvature: 0.5,
  iterations: 32,
  margin: {
    top: 5,
    right: 5,
    bottom: 5,
    left: 5
  }
}, $ec88e75f6e9bf177ba19aa23100$var$_temp)) || $ec88e75f6e9bf177ba19aa23100$var$_class;
$ec88e75f6e9bf177ba19aa23100$exports.default = $ec88e75f6e9bf177ba19aa23100$export$default;