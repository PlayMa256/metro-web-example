
var $edf31d36696ace8b65835fdfcf7088a$exports = {};
$parcel$require("2edf31d36696ace8b65835fdfcf7088a", "./define.js");
$parcel$require("2edf31d36696ace8b65835fdfcf7088a", "./color.js");
$parcel$require("2edf31d36696ace8b65835fdfcf7088a", "./math.js");
// https://observablehq.com/@mbostock/lab-and-rgb
var $edf31d36696ace8b65835fdfcf7088a$var$K = 18,
    $edf31d36696ace8b65835fdfcf7088a$var$Xn = 0.96422,
    $edf31d36696ace8b65835fdfcf7088a$var$Yn = 1,
    $edf31d36696ace8b65835fdfcf7088a$var$Zn = 0.82521,
    $edf31d36696ace8b65835fdfcf7088a$var$t0 = 4 / 29,
    $edf31d36696ace8b65835fdfcf7088a$var$t1 = 6 / 29,
    $edf31d36696ace8b65835fdfcf7088a$var$t2 = 3 * $edf31d36696ace8b65835fdfcf7088a$var$t1 * $edf31d36696ace8b65835fdfcf7088a$var$t1,
    $edf31d36696ace8b65835fdfcf7088a$var$t3 = $edf31d36696ace8b65835fdfcf7088a$var$t1 * $edf31d36696ace8b65835fdfcf7088a$var$t1 * $edf31d36696ace8b65835fdfcf7088a$var$t1;

function $edf31d36696ace8b65835fdfcf7088a$var$labConvert(o) {
  if (o instanceof $edf31d36696ace8b65835fdfcf7088a$export$Lab) return new $edf31d36696ace8b65835fdfcf7088a$export$Lab(o.l, o.a, o.b, o.opacity);
  if (o instanceof $edf31d36696ace8b65835fdfcf7088a$export$Hcl) return $edf31d36696ace8b65835fdfcf7088a$var$hcl2lab(o);
  if (!(o instanceof $edf31d36696ace8b65835fdfcf7088a$import$Rgb)) o = $edf31d36696ace8b65835fdfcf7088a$import$rgbConvert(o);
  var r = $edf31d36696ace8b65835fdfcf7088a$var$rgb2lrgb(o.r),
      g = $edf31d36696ace8b65835fdfcf7088a$var$rgb2lrgb(o.g),
      b = $edf31d36696ace8b65835fdfcf7088a$var$rgb2lrgb(o.b),
      y = $edf31d36696ace8b65835fdfcf7088a$var$xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / $edf31d36696ace8b65835fdfcf7088a$var$Yn),
      x,
      z;
  if (r === g && g === b) x = z = y;else {
    x = $edf31d36696ace8b65835fdfcf7088a$var$xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / $edf31d36696ace8b65835fdfcf7088a$var$Xn);
    z = $edf31d36696ace8b65835fdfcf7088a$var$xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / $edf31d36696ace8b65835fdfcf7088a$var$Zn);
  }
  return new $edf31d36696ace8b65835fdfcf7088a$export$Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);
}

function $edf31d36696ace8b65835fdfcf7088a$export$gray(l, opacity) {
  return new $edf31d36696ace8b65835fdfcf7088a$export$Lab(l, 0, 0, opacity == null ? 1 : opacity);
}

$edf31d36696ace8b65835fdfcf7088a$exports.gray = $edf31d36696ace8b65835fdfcf7088a$export$gray;

function $edf31d36696ace8b65835fdfcf7088a$export$default(l, a, b, opacity) {
  return arguments.length === 1 ? $edf31d36696ace8b65835fdfcf7088a$var$labConvert(l) : new $edf31d36696ace8b65835fdfcf7088a$export$Lab(l, a, b, opacity == null ? 1 : opacity);
}

$edf31d36696ace8b65835fdfcf7088a$exports.default = $edf31d36696ace8b65835fdfcf7088a$export$default;

function $edf31d36696ace8b65835fdfcf7088a$export$Lab(l, a, b, opacity) {
  this.l = +l;
  this.a = +a;
  this.b = +b;
  this.opacity = +opacity;
}

$edf31d36696ace8b65835fdfcf7088a$exports.Lab = $edf31d36696ace8b65835fdfcf7088a$export$Lab;
$edf31d36696ace8b65835fdfcf7088a$import$define($edf31d36696ace8b65835fdfcf7088a$export$Lab, $edf31d36696ace8b65835fdfcf7088a$export$default, $edf31d36696ace8b65835fdfcf7088a$import$extend($edf31d36696ace8b65835fdfcf7088a$import$Color, {
  brighter: function (k) {
    return new $edf31d36696ace8b65835fdfcf7088a$export$Lab(this.l + $edf31d36696ace8b65835fdfcf7088a$var$K * (k == null ? 1 : k), this.a, this.b, this.opacity);
  },
  darker: function (k) {
    return new $edf31d36696ace8b65835fdfcf7088a$export$Lab(this.l - $edf31d36696ace8b65835fdfcf7088a$var$K * (k == null ? 1 : k), this.a, this.b, this.opacity);
  },
  rgb: function () {
    var y = (this.l + 16) / 116,
        x = isNaN(this.a) ? y : y + this.a / 500,
        z = isNaN(this.b) ? y : y - this.b / 200;
    x = $edf31d36696ace8b65835fdfcf7088a$var$Xn * $edf31d36696ace8b65835fdfcf7088a$var$lab2xyz(x);
    y = $edf31d36696ace8b65835fdfcf7088a$var$Yn * $edf31d36696ace8b65835fdfcf7088a$var$lab2xyz(y);
    z = $edf31d36696ace8b65835fdfcf7088a$var$Zn * $edf31d36696ace8b65835fdfcf7088a$var$lab2xyz(z);
    return new $edf31d36696ace8b65835fdfcf7088a$import$Rgb($edf31d36696ace8b65835fdfcf7088a$var$lrgb2rgb(3.1338561 * x - 1.6168667 * y - 0.4906146 * z), $edf31d36696ace8b65835fdfcf7088a$var$lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z), $edf31d36696ace8b65835fdfcf7088a$var$lrgb2rgb(0.0719453 * x - 0.2289914 * y + 1.4052427 * z), this.opacity);
  }
}));

function $edf31d36696ace8b65835fdfcf7088a$var$xyz2lab(t) {
  return t > $edf31d36696ace8b65835fdfcf7088a$var$t3 ? Math.pow(t, 1 / 3) : t / $edf31d36696ace8b65835fdfcf7088a$var$t2 + $edf31d36696ace8b65835fdfcf7088a$var$t0;
}

function $edf31d36696ace8b65835fdfcf7088a$var$lab2xyz(t) {
  return t > $edf31d36696ace8b65835fdfcf7088a$var$t1 ? t * t * t : $edf31d36696ace8b65835fdfcf7088a$var$t2 * (t - $edf31d36696ace8b65835fdfcf7088a$var$t0);
}

function $edf31d36696ace8b65835fdfcf7088a$var$lrgb2rgb(x) {
  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);
}

function $edf31d36696ace8b65835fdfcf7088a$var$rgb2lrgb(x) {
  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);
}

function $edf31d36696ace8b65835fdfcf7088a$var$hclConvert(o) {
  if (o instanceof $edf31d36696ace8b65835fdfcf7088a$export$Hcl) return new $edf31d36696ace8b65835fdfcf7088a$export$Hcl(o.h, o.c, o.l, o.opacity);
  if (!(o instanceof $edf31d36696ace8b65835fdfcf7088a$export$Lab)) o = $edf31d36696ace8b65835fdfcf7088a$var$labConvert(o);
  if (o.a === 0 && o.b === 0) return new $edf31d36696ace8b65835fdfcf7088a$export$Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);
  var h = Math.atan2(o.b, o.a) * $edf31d36696ace8b65835fdfcf7088a$import$rad2deg;
  return new $edf31d36696ace8b65835fdfcf7088a$export$Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);
}

function $edf31d36696ace8b65835fdfcf7088a$export$lch(l, c, h, opacity) {
  return arguments.length === 1 ? $edf31d36696ace8b65835fdfcf7088a$var$hclConvert(l) : new $edf31d36696ace8b65835fdfcf7088a$export$Hcl(h, c, l, opacity == null ? 1 : opacity);
}

$edf31d36696ace8b65835fdfcf7088a$exports.lch = $edf31d36696ace8b65835fdfcf7088a$export$lch;

function $edf31d36696ace8b65835fdfcf7088a$export$hcl(h, c, l, opacity) {
  return arguments.length === 1 ? $edf31d36696ace8b65835fdfcf7088a$var$hclConvert(h) : new $edf31d36696ace8b65835fdfcf7088a$export$Hcl(h, c, l, opacity == null ? 1 : opacity);
}

$edf31d36696ace8b65835fdfcf7088a$exports.hcl = $edf31d36696ace8b65835fdfcf7088a$export$hcl;

function $edf31d36696ace8b65835fdfcf7088a$export$Hcl(h, c, l, opacity) {
  this.h = +h;
  this.c = +c;
  this.l = +l;
  this.opacity = +opacity;
}

$edf31d36696ace8b65835fdfcf7088a$exports.Hcl = $edf31d36696ace8b65835fdfcf7088a$export$Hcl;

function $edf31d36696ace8b65835fdfcf7088a$var$hcl2lab(o) {
  if (isNaN(o.h)) return new $edf31d36696ace8b65835fdfcf7088a$export$Lab(o.l, 0, 0, o.opacity);
  var h = o.h * $edf31d36696ace8b65835fdfcf7088a$import$deg2rad;
  return new $edf31d36696ace8b65835fdfcf7088a$export$Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);
}

$edf31d36696ace8b65835fdfcf7088a$import$define($edf31d36696ace8b65835fdfcf7088a$export$Hcl, $edf31d36696ace8b65835fdfcf7088a$export$hcl, $edf31d36696ace8b65835fdfcf7088a$import$extend($edf31d36696ace8b65835fdfcf7088a$import$Color, {
  brighter: function (k) {
    return new $edf31d36696ace8b65835fdfcf7088a$export$Hcl(this.h, this.c, this.l + $edf31d36696ace8b65835fdfcf7088a$var$K * (k == null ? 1 : k), this.opacity);
  },
  darker: function (k) {
    return new $edf31d36696ace8b65835fdfcf7088a$export$Hcl(this.h, this.c, this.l - $edf31d36696ace8b65835fdfcf7088a$var$K * (k == null ? 1 : k), this.opacity);
  },
  rgb: function () {
    return $edf31d36696ace8b65835fdfcf7088a$var$hcl2lab(this).rgb();
  }
}));